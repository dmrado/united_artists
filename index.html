<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Листинг 8.5</title>
    <script type="text/javascript">
        //переменные для ссылок на объекты
        var pict,cnv,ctx;
        //массив с графическими файлами
        var files = ["fox.jpg", "raccoon.jpg", "wolf.jpg"];
        //массив с текстовыми подписями
        var text=["Это лиса", "Это енот", "Это волк"];
        var gender=["", "вчик", "вец"];
        var path="images/";
        //индекс выбранного изображения
        var sld=0;
        //поехали обработчик события, связанного с загрузкой документа
        window.onload=function(){
            //создание объекта изображения
            pict= new Image();
            //получение ссылки на объект графической области
            cnv= document.getElementById("mycanvas");
            cnv.title="Щелкние мышью для просмотра\nследующего изображения";
            //ссылка на объект графического контекста
            ctx= cnv.getContext("2d");
            ctx.font= "30 px Arial";
            //вызов функции, выполняющей заливку графической области и рисование текста
            set();
            //обработчик события, связанного с загрузкой графического изображения из файла так изображение появится только после его загрузки, загрузку осуществляет функция set() и как только обработчик понимает что картинка загружена, он ее отрисовывает в графической области
            pict.onload = function () {
                //рисование изображения
                ctx.drawImage(pict,15,15);//стр 539
            }
            //обработка события, связанного со щелчком мышью в графческой области
            cnv.onclick = function () {
                //новое значение для индекса выбранного изображения. Если текущее значение переменной sld меньше индекса последнего элемента в массива - 2, то оно увеличивается на единицу. Если равно, то становится равным 0. Если после запятой что-то есть , тогда sld увеличивается на единицу.
                sld = (sld+1)%(files.length);//стр 594
                set();
            }
        }
        //описание функции set()
        function set() {
            //заливка желтая
            ctx.fillStyle= "yellow";
            // заливка графической области желтым цветом
            ctx.fillRect(10,12,cnv.width,cnv.height);//стр 592
            //синий цвет заливки
            ctx.fillStyle= "red";
            //ссылка на файл с изображением
            pict.src= path+files[sld];
            //рисование текста в графической области
            ctx.fillText(text[sld]+" - краса"+gender[sld],40,230);//попробуй strokeText - вдавленные буквы
        }
    </script>
</head>
<body>
    <h2>Главная страница</h2>
    <br>
    <canvas height="250" width="215" id="mycanvas" style="border: 3px solid #0000ff;"></canvas>
<div><br/>
    <a href="draw.html">Перейти  к рисованию</a><br/>
    <a href="enot.html">Перейти  к описанию зверей</a><br/>
    <a href="event.html">Перейти к событию координат мыши</a><br/>
    <a href="dispatch.html">Перейти к диспетчеризации</a><br/>
    <a href="calculator.html"><b>КАЛЬКУЛЯТОР</b></a><br/>
    <a href="koha.html">Перейти к кривой Коха</a><br/>
    <a href="vers.html">Перейти к стихам А. С. Пушкина</a><br/>
    <a href="images.html">Перейти к изображению</a><br/>
    <a href="watches.html">Перейти к аналоговым часам</a><br/>
    <a href="keyLogger.html">Перейти к keyLogger</a><br/>
    <a href="spoiler.html">Перейти к Spoiler</a><br/>
    <a href="wiki/index.html">Перейти к Wiki</a><br/>
</div>
</body>
</html>